{"version":3,"sources":["public/src/presenter.ts","public/src/receptorClient.ts","public/src/components/utils.ts"],"names":["constructor","rec","lines","queue","raw","div","utils_1","width","height","className","control","stopButton","innerHTML","onclick","disabled","console","log","stop","append","textContainner","margin","color","fontSize","display","flexDirection","flexFlow","overflow","document","body","data","push","id","marginRight","prepend","result","textAlign","presenter","presenter_1","socket","io","on","roomId","location","pathname","length","Error","split","slice","emit","connect","pixelFields","style","Object","keys","forEach","k","is_number","indexOf","type","styleOrClass","__style","__className","createElement","applyStyle"],"mappings":"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","file":"","sourcesContent":["import { createDiv, createElement } from \"./components/utils\"\r\n\r\nexport class Presenter {\r\n    textContainner: HTMLDivElement;\r\n    control: HTMLDivElement;\r\n    lines: {[id: string]: HTMLDivElement} = {}\r\n    queue: {result: string, id: string}[] = []\r\n    raw: string = \"\"\r\n    constructor(rec?) {\r\n        var div = createDiv({width: \"100%\", height: \"100%\"})\r\n        div.className=\"msgContainner\";\r\n\r\n        this.control = createDiv()\r\n        var stopButton = createElement(\"button\")\r\n        stopButton.innerHTML = \"STOP\"\r\n        stopButton.onclick = () => {\r\n            stopButton.disabled = true\r\n            if(rec) {\r\n                console.log(\"STOP RECORDER\", rec)\r\n                rec.stop()\r\n            }\r\n        }\r\n        this.control.append(stopButton)\r\n        div.append(this.control)\r\n\r\n        this.textContainner = createDiv({width: 350,  margin: \"auto auto\", color: \"#ffffff\", fontSize: 20, \r\n        display: \"flex\", flexDirection: \"column\", flexFlow: \"column-reverse\", overflow: \"hidden\", height: 120})\r\n        div.append(this.textContainner)\r\n\r\n        document.body.append(div)\r\n    }\r\n    append(data: {result: string, id: string}) {\r\n        this.queue.push(data)   \r\n\r\n        if (!this.lines[data.id]) {\r\n            var div = createDiv(\"textRow\",{ marginRight: \"4pt\"});\r\n            //this.textContainner.append(div);\r\n            this.textContainner.prepend(div);\r\n            this.lines[data.id] = div;\r\n            this.lines[data.id].innerHTML = data.result;\r\n        } else {\r\n            this.lines[data.id].innerHTML = data.result;\r\n        }\r\n      \r\n    }\r\n}\r\nexport class Presenter2 {\r\n    textContainner: HTMLDivElement;\r\n    control: HTMLDivElement;\r\n    lines: {[id: string]: HTMLDivElement} = {}\r\n    queue: {result: string, id: string}[] = []\r\n    raw: string = \"\"\r\n    constructor(rec?) {\r\n        var div = createDiv({width: \"100%\", height: \"100%\"})\r\n        div.className=\"msgContainner\";\r\n\r\n        this.control = createDiv()\r\n        var stopButton = createElement(\"button\")\r\n        stopButton.innerHTML = \"STOP\"\r\n        stopButton.onclick = () => {\r\n            stopButton.disabled = true\r\n            if(rec) {\r\n                console.log(\"STOP RECORDER\", rec)\r\n                rec.stop()\r\n            }\r\n        }\r\n        this.control.append(stopButton)\r\n        div.append(this.control)\r\n\r\n        this.textContainner = createDiv({width: 350, textAlign: \"center\", margin: \"auto auto\", color: \"#ffffff\", fontSize: 20, display: \"block\"})\r\n        div.append(this.textContainner)\r\n\r\n        document.body.append(div)\r\n    }\r\n    append(data: {result: string, id: string}) {\r\n        this.queue.push(data)   \r\n\r\n        if (!this.lines[data.id]) {\r\n            var div = createDiv({display: \"inline\", marginRight: \"4pt\"});\r\n            this.textContainner.append(div);\r\n            this.lines[data.id] = div;\r\n            this.lines[data.id].innerHTML = data.result;\r\n        } else {\r\n            this.lines[data.id].innerHTML = data.result;\r\n        }\r\n      \r\n    }\r\n}\r\n","import { Presenter } from \"./presenter\";\r\ndeclare const io : typeof import(\"socket.io-client\").default\r\nvar presenter = new Presenter()\r\n\r\n\r\nvar socket = io()\r\n\r\n\r\nsocket.on(\"disconnect\", () => {\r\n    console.log(\"disconected\")\r\n})\r\nsocket.on(\"connect\", () => {\r\n    console.log(\"connected\")\r\n})\r\nsocket.on(\"hello\", () => {\r\n    var roomId = location.pathname || \"\"\r\n    if (roomId.length < 2) {\r\n        throw new Error(\"sala invalida\")\r\n        return\r\n    }\r\n    roomId = roomId.split(\"/\").slice(2)[0];\r\n    socket.emit(\"join\", {roomId: roomId});  \r\n\r\n\r\n})\r\nsocket.on(\"joined\",  (roomId) => {\r\n    socket.on(\"mensaje\", data => {\r\n        console.log(data.result)\r\n        presenter.append(data)\r\n    })\r\n\r\n    console.log(\"Joined to room\")\r\n    socket.emit(\"test\")\r\n});  \r\n\r\nsocket.connect()","const pixelFields = [\"margin\", \"marginLeft\", \"marginRight\", \"marginTop\",\"marginBottom\", \r\n    \"padding\", \"paddingLeft\", \"paddingRight\", \"paddingTop\",\"paddingBottom\",\r\n    \"left\", \"top\", \"right\", \"bottom\",\"width\",\"height\", \"minWidth\", \"minHeight\", \r\n    \"maxWidth\", \"maxHeight\", \"borderWidth\"]\r\nexport function applyStyle(div: HTMLElement, style: any) {\r\n    Object.keys(style || {}).forEach(k => {\r\n        let is_number = pixelFields.indexOf(k) >= 0\r\n        if (is_number && typeof style[k] == \"number\") div.style[k] = style[k]+\"px\"\r\n        else div.style[k] = style[k]\r\n   \r\n    })\r\n}\r\n\r\n\r\ninterface  ICreateElement {\r\n    (type: \"button\", styleOrClass?: string | object, style?: object): HTMLButtonElement;\r\n    (type: \"div\", styleOrClass?: string | object, style?: object): HTMLDivElement;\r\n    (type: string, styleOrClass?: string | object, style?: object): HTMLElement;\r\n}\r\nexport const createElement: ICreateElement = (type: string, styleOrClass?: string | object, style?: object) => {\r\n    var __style = typeof styleOrClass == \"object\"? styleOrClass : style || {}\r\n    var __className = typeof styleOrClass == \"string\"? styleOrClass : \"\"\r\n    var div = document.createElement(type)\r\n    div.className = __className\r\n    applyStyle(div, __style)\r\n    return div as any\r\n} \r\n\r\nexport function createDiv(styleOrClass?: string | object, style?: object) {\r\n    var __style = typeof styleOrClass == \"object\"? styleOrClass : style || {}\r\n    var __className = typeof styleOrClass == \"string\"? styleOrClass : \"\"\r\n    var div = document.createElement(\"div\")\r\n    div.className = __className\r\n    applyStyle(div, __style)\r\n    return div\r\n}\r\n"]}