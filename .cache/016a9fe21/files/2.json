{"contents":"exports.__esModule = true;\nvar utils_1 = __fusereq(3);\nclass Presenter {\n  constructor(rec, roomKey) {\n    this.mensajes = {};\n    this.queue = [];\n    this.raw = \"\";\n    this.stoped = false;\n    this.listennerMode = true;\n    this.elements = {};\n    this.__title = \"\";\n    var div = utils_1.createDiv({\n      width: \"100%\",\n      height: \"100%\"\n    });\n    div.className = \"msgContainner\";\n    div.id = \"core\";\n    var header = utils_1.createDiv(\"header\");\n    div.append(header);\n    let title = utils_1.createElement(\"h2\", {\n      margin: \"15px 0\"\n    });\n    title.innerHTML = ``;\n    header.append(title);\n    this.elements.title = title;\n    let roomData = utils_1.createDiv({\n      margin: \"15px 0\"\n    });\n    roomData.innerHTML = `Id de la sala: ${roomId}`;\n    let svg = utils_1.createElement(\"img\", {\n      paddingLeft: 10\n    });\n    svg.classList.add(\"fullscreen\");\n    svg.src = \"/images/fullscreen.svg\";\n    svg.onclick = () => {\n      document.documentElement.requestFullscreen();\n    };\n    roomData.append(svg);\n    header.append(roomData);\n    this.elements.roomData = roomData;\n    let timeCounter = utils_1.createDiv({\n      margin: \"15px 0\",\n      fontSize: 30,\n      fontWeight: 600\n    });\n    timeCounter.innerHTML = ``;\n    header.append(timeCounter);\n    this.elements.timeCounter = timeCounter;\n    if (rec) this.listennerMode = false;\n    this.control = utils_1.createDiv(\"navigation\");\n    var stopButton = utils_1.createElement(\"button\");\n    stopButton.innerHTML = \"STOP\";\n    stopButton.onclick = () => {\n      if (this.stoped && this.listennerMode) {\n        stopButton.classList.remove(\"disabled\");\n        stopButton.innerHTML = \"STOP\";\n        this.stoped = false;\n      } else {\n        stopButton.classList.add(\"disabled\");\n        stopButton.innerHTML = \"RESTART\";\n        this.stoped = true;\n      }\n      if (rec) {\n        console.log(\"STOP RECORDER\", rec);\n        rec.stop();\n        var irAlEditor = utils_1.createElement(\"button\");\n        irAlEditor.innerHTML = \"Ir al editor\";\n        irAlEditor.onclick = () => {\n          location.href = `/editor/${roomKey}`;\n        };\n        this.control.append(irAlEditor);\n      }\n    };\n    this.control.append(stopButton);\n    div.append(this.control);\n    this.transmissionContainner = utils_1.createDiv(\"transcripciones\", {\n      width: 400,\n      maxHeight: 200,\n      margin: \"auto auto\",\n      color: \"#ffffff\",\n      fontSize: 20,\n      display: \"flex\",\n      flexDirection: \"column\",\n      overflow: \"hidden\"\n    });\n    this.transmissionContainner.style.scrollBehavior = \"smooth\";\n    div.append(this.transmissionContainner);\n    document.body.append(div);\n  }\n  set title(value) {\n    this.__title = value;\n    this.elements.title.innerHTML = value;\n  }\n  set timeElapsed(value) {\n    this.elements.timeCounter.innerHTML = (value / 1000 | 0).toString();\n  }\n  render() {\n    if (this.listennerMode == true && this.stoped) return;\n    while (this.queue.length) {\n      var mensaje = this.queue.splice(0, 1)[0];\n      if (!this.mensajes[mensaje.id]) {\n        var div = utils_1.createDiv(\"textRow\", {\n          marginRight: \"4pt\"\n        });\n        this.transmissionContainner.append(div);\n        this.mensajes[mensaje.id] = div;\n        this.mensajes[mensaje.id].innerHTML = mensaje.result;\n        this.transmissionContainner.scrollTo({\n          top: this.transmissionContainner.scrollHeight\n        });\n      } else {\n        this.mensajes[mensaje.id].innerHTML = mensaje.result;\n        this.transmissionContainner.scrollTo({\n          top: this.transmissionContainner.scrollHeight\n        });\n      }\n    }\n  }\n  append(data) {\n    this.queue.push(data);\n    this.render();\n  }\n  stop() {\n    this.stoped = true;\n  }\n  resume() {\n    this.stoped = false;\n    this.render();\n  }\n}\nexports.Presenter = Presenter;\n","sourceMap":"{\"version\":3,\"sources\":[\"public/src/presenter.ts\"],\"names\":[\"constructor\",\"rec\",\"roomKey\",\"mensajes\",\"queue\",\"raw\",\"stoped\",\"listennerMode\",\"elements\",\"__title\",\"div\",\"utils_1\",\"width\",\"height\",\"className\",\"id\",\"header\",\"append\",\"title\",\"margin\",\"innerHTML\",\"roomData\",\"roomId\",\"svg\",\"paddingLeft\",\"classList\",\"add\",\"src\",\"onclick\",\"document\",\"documentElement\",\"requestFullscreen\",\"timeCounter\",\"fontSize\",\"fontWeight\",\"control\",\"stopButton\",\"remove\",\"console\",\"log\",\"stop\",\"irAlEditor\",\"location\",\"href\",\"transmissionContainner\",\"maxHeight\",\"color\",\"display\",\"flexDirection\",\"overflow\",\"style\",\"scrollBehavior\",\"body\",\"value\",\"timeElapsed\",\"toString\",\"render\",\"length\",\"mensaje\",\"splice\",\"marginRight\",\"result\",\"scrollTo\",\"top\",\"scrollHeight\",\"data\",\"push\",\"resume\"],\"mappings\":\";;AAGO;EAYHA,YAAaC,KAAMC;SATnBC;SACAC;SACAC,MAAc;SACdC,SAAkB;SAClBC,gBAAyB;SAEzBC;SAEQC,UAAU;QAEVC,MAAMC;MAAWC,OAAO;MAAQC,QAAQ;;IAC5CH,IAAII,YAAU;IACdJ,IAAIK,KAAK;QAELC,SAASL,kBAAU;IACvBD,IAAIO,OAAOD;QAEPE,QAAQP,sBAAc;MAAOQ,QAAQ;;IACzCD,MAAME;IACNJ,OAAOC,OAAOC;IACd,KAAKV,SAASU,QAAQA;QAElBG,WAAWV;MAAWQ,QAAQ;;IAClCE,SAASD,8BAA8BE;QACnCC,MAAMZ,sBAAc;MAASa,aAAa;;IAC9CD,IAAIE,UAAUC,IAAI;IAClBH,IAAII,MAAM;IACVJ,IAAIK,UAAU;MACVC,SAASC,gBAAgBC;;IAE7BV,SAASJ,OAAOM;IAChBP,OAAOC,OAAOI;IACd,KAAKb,SAASa,WAAWA;QAErBW,cAAcrB;MAAWQ,QAAQ;MAAUc,UAAU;MAAIC,YAAY;;IACzEF,YAAYZ;IACZJ,OAAOC,OAAOe;IACd,KAAKxB,SAASwB,cAAcA;QAGxB/B,KAAK,KAAKM,gBAAgB;IAE9B,KAAK4B,UAAUxB,kBAAU;QACrByB,aAAazB,sBAAc;IAC/ByB,WAAWhB,YAAY;IACvBgB,WAAWR,UAAU;UACb,KAAKtB,UAAU,KAAKC;QACpB6B,WAAWX,UAAUY,OAAO;QAC5BD,WAAWhB,YAAY;QACvB,KAAKd,SAAS;;QAEd8B,WAAWX,UAAUC,IAAI;QACzBU,WAAWhB,YAAY;QACvB,KAAKd,SAAS;;UAGfL;QACCqC,QAAQC,IAAI,iBAAiBtC;QAC7BA,IAAIuC;YAEAC,aAAa9B,sBAAc;QAC/B8B,WAAWrB,YAAY;QACvBqB,WAAWb,UAAU;UACjBc,SAASC,kBAAkBzC;;QAE/B,KAAKiC,QAAQlB,OAAOwB;;;IAG5B,KAAKN,QAAQlB,OAAOmB;IAKpB1B,IAAIO,OAAO,KAAKkB;IAEhB,KAAKS,yBAAyBjC,kBAAU;MAAoBC,OAAO;MAAKiC,WAAW;MAAM1B,QAAQ;MAAa2B,OAAO;MAAWb,UAAU;MAC1Ic,SAAS;MAAQC,eAAe;MAAUC,UAAU;;IACpD,KAAKL,uBAAuBM,MAAMC,iBAAiB;IACnDzC,IAAIO,OAAO,KAAK2B;IAEhBf,SAASuB,KAAKnC,OAAOP;;MAGrBQ,MAAMmC;IACN,KAAK5C,UAAU4C;IACf,KAAK7C,SAASU,MAAME,YAAYiC;;MAEhCC,YAAYD;IACZ,KAAK7C,SAASwB,YAAYZ,aAAaiC,QAAQ,OAAO,GAAGE;;EAGrDC;QACA,KAAKjD,iBAAiB,QAAQ,KAAKD;WACjC,KAAKF,MAAMqD;UACTC,UAAU,KAAKtD,MAAMuD,OAAO,GAAG,GAAG;WACjC,KAAKxD,SAASuD,QAAQ3C;YACnBL,MAAMC,kBAAU;UAAYiD,aAAa;;QAC7C,KAAKhB,uBAAuB3B,OAAOP;QACnC,KAAKP,SAASuD,QAAQ3C,MAAML;QAC5B,KAAKP,SAASuD,QAAQ3C,IAAIK,YAAYsC,QAAQG;QAC9C,KAAKjB,uBAAuBkB;UAAUC,KAAK,KAAKnB,uBAAuBoB;;;QAEvE,KAAK7D,SAASuD,QAAQ3C,IAAIK,YAAYsC,QAAQG;QAC9C,KAAKjB,uBAAuBkB;UAAUC,KAAK,KAAKnB,uBAAuBoB;;;;;EAKnF/C,OAAOgD;IACH,KAAK7D,MAAM8D,KAAKD;IAChB,KAAKT;;EAEThB;IACI,KAAKlC,SAAS;;EAElB6D;IACI,KAAK7D,SAAS;IACd,KAAKkD\",\"sourcesContent\":[\"import { createDiv, createElement } from \\\"./components/utils\\\"\\r\\ndeclare const roomId: string;\\r\\n\\r\\nexport class Presenter {\\r\\n    transmissionContainner: HTMLDivElement;\\r\\n    control: HTMLDivElement;\\r\\n    mensajes: {[id: string]: HTMLDivElement} = {}\\r\\n    queue: {result: string, id: string}[] = []\\r\\n    raw: string = \\\"\\\"\\r\\n    stoped: boolean = false;\\r\\n    listennerMode: boolean = true;\\r\\n\\r\\n    elements: {title?: HTMLElement, roomData?: HTMLElement, timeCounter?: HTMLElement} = {}\\r\\n\\r\\n    private __title = \\\"\\\";\\r\\n    constructor( rec?, roomKey?: string) {\\r\\n        var div = createDiv({width: \\\"100%\\\", height: \\\"100%\\\"})\\r\\n        div.className=\\\"msgContainner\\\";\\r\\n        div.id = \\\"core\\\"\\r\\n\\r\\n        var header = createDiv(\\\"header\\\")\\r\\n        div.append(header)\\r\\n\\r\\n        let title = createElement(\\\"h2\\\", {margin: \\\"15px 0\\\"})\\r\\n        title.innerHTML = ``;       \\r\\n        header.append(title)\\r\\n        this.elements.title = title;\\r\\n\\r\\n        let roomData = createDiv({margin: \\\"15px 0\\\"})\\r\\n        roomData.innerHTML = `Id de la sala: ${roomId}`;  \\r\\n        let svg = createElement(\\\"img\\\",  {paddingLeft: 10}) as HTMLImageElement;\\r\\n        svg.classList.add(\\\"fullscreen\\\")\\r\\n        svg.src = \\\"/images/fullscreen.svg\\\";\\r\\n        svg.onclick = () => {\\r\\n            document.documentElement.requestFullscreen()\\r\\n        }\\r\\n        roomData.append(svg)     \\r\\n        header.append(roomData)\\r\\n        this.elements.roomData = roomData;\\r\\n\\r\\n        let timeCounter = createDiv({margin: \\\"15px 0\\\", fontSize: 30, fontWeight: 600})\\r\\n        timeCounter.innerHTML = ``;       \\r\\n        header.append(timeCounter)\\r\\n        this.elements.timeCounter = timeCounter;\\r\\n\\r\\n\\r\\n        if (rec) this.listennerMode = false;\\r\\n\\r\\n        this.control = createDiv(\\\"navigation\\\")\\r\\n        var stopButton = createElement(\\\"button\\\")\\r\\n        stopButton.innerHTML = \\\"STOP\\\"\\r\\n        stopButton.onclick = () => {\\r\\n            if (this.stoped && this.listennerMode) {\\r\\n                stopButton.classList.remove(\\\"disabled\\\")\\r\\n                stopButton.innerHTML = \\\"STOP\\\"\\r\\n                this.stoped = false;\\r\\n            } else {\\r\\n                stopButton.classList.add(\\\"disabled\\\")\\r\\n                stopButton.innerHTML = \\\"RESTART\\\"\\r\\n                this.stoped = true;\\r\\n            }\\r\\n           \\r\\n            if(rec) {\\r\\n                console.log(\\\"STOP RECORDER\\\", rec);\\r\\n                rec.stop();\\r\\n\\r\\n                var irAlEditor = createElement(\\\"button\\\");\\r\\n                irAlEditor.innerHTML = \\\"Ir al editor\\\";\\r\\n                irAlEditor.onclick = () => {\\r\\n                    location.href = `/editor/${roomKey}`;\\r\\n                }\\r\\n                this.control.append(irAlEditor);\\r\\n            }\\r\\n        }\\r\\n        this.control.append(stopButton)\\r\\n\\r\\n        \\r\\n\\r\\n\\r\\n        div.append(this.control)\\r\\n\\r\\n        this.transmissionContainner = createDiv(\\\"transcripciones\\\", {width: 400, maxHeight: 200,  margin: \\\"auto auto\\\", color: \\\"#ffffff\\\", fontSize: 20, \\r\\n        display: \\\"flex\\\", flexDirection: \\\"column\\\", overflow: \\\"hidden\\\"})\\r\\n        this.transmissionContainner.style.scrollBehavior = \\\"smooth\\\";\\r\\n        div.append(this.transmissionContainner)\\r\\n\\r\\n        document.body.append(div)\\r\\n    }\\r\\n\\r\\n    set title(value: string) {\\r\\n        this.__title = value;\\r\\n        this.elements.title.innerHTML = value;\\r\\n    }\\r\\n    set timeElapsed(value: number) {\\r\\n        this.elements.timeCounter.innerHTML = (value / 1000 | 0).toString();\\r\\n    }\\r\\n\\r\\n    private render() {\\r\\n        if (this.listennerMode == true && this.stoped) return;\\r\\n        while(this.queue.length) {\\r\\n            var mensaje = this.queue.splice(0, 1)[0];\\r\\n            if (!this.mensajes[mensaje.id]) {\\r\\n                var div = createDiv(\\\"textRow\\\",{ marginRight: \\\"4pt\\\"});\\r\\n                this.transmissionContainner.append(div);\\r\\n                this.mensajes[mensaje.id] = div;\\r\\n                this.mensajes[mensaje.id].innerHTML = mensaje.result;\\r\\n                this.transmissionContainner.scrollTo({top: this.transmissionContainner.scrollHeight})\\r\\n            } else {\\r\\n                this.mensajes[mensaje.id].innerHTML = mensaje.result;\\r\\n                this.transmissionContainner.scrollTo({top: this.transmissionContainner.scrollHeight})\\r\\n            }\\r\\n        }\\r\\n     \\r\\n    }\\r\\n    append(data: {result: string, id: string}) {\\r\\n        this.queue.push(data)   \\r\\n        this.render();  \\r\\n    }\\r\\n    stop() {\\r\\n        this.stoped = true;\\r\\n    }\\r\\n    resume() {\\r\\n        this.stoped = false;\\r\\n        this.render();\\r\\n    }\\r\\n}\\r\\n\"]}"}