{"contents":"'use strict';\nvar url = __fusereq(50);\nvar parse = url.parse;\nvar Url = url.Url;\nmodule.exports = parseurl;\nmodule.exports.original = originalurl;\nfunction parseurl(req) {\n  var url = req.url;\n  if (url === undefined) {\n    return undefined;\n  }\n  var parsed = req._parsedUrl;\n  if (fresh(url, parsed)) {\n    return parsed;\n  }\n  parsed = fastparse(url);\n  parsed._raw = url;\n  return req._parsedUrl = parsed;\n}\n;\nfunction originalurl(req) {\n  var url = req.originalUrl;\n  if (typeof url !== 'string') {\n    return parseurl(req);\n  }\n  var parsed = req._parsedOriginalUrl;\n  if (fresh(url, parsed)) {\n    return parsed;\n  }\n  parsed = fastparse(url);\n  parsed._raw = url;\n  return req._parsedOriginalUrl = parsed;\n}\n;\nfunction fastparse(str) {\n  if (typeof str !== 'string' || str.charCodeAt(0) !== 0x2f) {\n    return parse(str);\n  }\n  var pathname = str;\n  var query = null;\n  var search = null;\n  for (var i = 1; i < str.length; i++) {\n    switch (str.charCodeAt(i)) {\n      case 0x3f:\n        if (search === null) {\n          pathname = str.substring(0, i);\n          query = str.substring(i + 1);\n          search = str.substring(i);\n        }\n        break;\n      case 0x09:\n      case 0x0a:\n      case 0x0c:\n      case 0x0d:\n      case 0x20:\n      case 0x23:\n      case 0xa0:\n      case 0xfeff:\n        return parse(str);\n    }\n  }\n  var url = Url !== undefined ? new Url() : {};\n  url.path = str;\n  url.href = str;\n  url.pathname = pathname;\n  if (search !== null) {\n    url.query = query;\n    url.search = search;\n  }\n  return url;\n}\nfunction fresh(url, parsedUrl) {\n  return typeof parsedUrl === 'object' && parsedUrl !== null && (Url === undefined || parsedUrl instanceof Url) && parsedUrl._raw === url;\n}\n"}